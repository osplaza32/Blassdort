
<div class="ibox-content">
  <div class="ibox-content"><div class="col-sm-4 m-b-xs">
    <a onclick="fnClickAddRow();" href="<%= url_for :controller => 'puertas',:action => 'create' %>" class="btn btn-primary ">Agregar Puerta</a></div>

    <div class="col-sm-3">
      <div class="input-group">
        <input type="text" placeholder="Search" class="input-sm form-control"> <span class="input-group-btn">
                                        <button type="button" class="btn btn-sm btn-primary"> Go!</button>
                                    </span>
      </div>
    </div>
    <div class="col-sm-4 m-b-xs">
      <div data-toggle="buttons" class="btn-group">
        <label class="btn btn-sm btn-white"> <input type="radio" id="option1" name="options"> CSU </label>
        <label class="btn btn-sm btn-white active"> <input type="radio" id="option2" name="options"> EXCEL </label>
        <label class="btn btn-sm btn-white"> <input type="radio" id="option3" name="options"> PDF </label>
      </div>
    </div>
  </div>
  <table class="table table-striped table-bordered table-hover " id="editable">
    <thead>

      <tr>
      <th>Puerta</th>
      <th># Serial</th>
      <th>Cantidad de Usuarios</th>
      <th>Ultimo acceso</th>

    </tr>
    </thead>
    <tbody>
<%@datospuertas.each do |item|%>
      <tr data-toggle="modal" data-target="#myModal4<%=Hardware.find(item.hardware_id).nserial%>" style="cursor: pointer;">

        <td> <%= item.descr%>  </td>
        <td><%= Hardware.find(item.hardware_id).nserial %></td>
      </tr>
      <div class="modal inmodal" id="myModal4<%=Hardware.find(item.hardware_id).nserial%>" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content animated fadeIn">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
              <i class="fa fa-info fa-5x"></i>
              <h4 class="modal-title"><%= item.descr %></h4>
              <small><%= item.descr %></small>
            </div>
            <div class="modal-body">

              <p>
                <img src="https://vignette.wikia.nocookie.net/halo/images/7/7a/BlastDoor_POA.png/revision/latest?cb=20150416054031" alt="<%= item.descr %>"/>
              </p>
              <%=form_for :puertas, url: url_for( :controller => :puertas, :action => :update ) do |f| %>
                <div class="form-group">
            <%= text_field 'Descriptcion', "puertas" ,:value => "#{item.descr}",:readonly => true %>
                </div>
              <%end%>

            </div>
            <div class="modal-footer">
              <%= button_to( "Agregar Usuario", {:action => "add", :controller => "puertas",data: { puera: "#{Hardware.find(item.hardware_id).nserial}" }} ,{:class =>"btn btn-primary"})%>
              <button type="button" class="btn btn-primary">Editar</button>
              <button type="button" class="btn btn-primary">Abrir Puertas</button>


            </div>
          </div>
        </div>
      </div>
<%end%>
    </tbody>

  </table>

</div>
</div>
</div>
</div>
</div>

<% content_for :javascript do %>

  <script type="text/javascript">


      $(function() {

          $('.dataTables-example').dataTable({
              "dom": 'T<"clear">lfrtip',
              "tableTools": {
                  "sSwfPath": "../assets/dataTables/swf/copy_csv_xls_pdf.swf"
              }
          });

          /* Init DataTables */
          var oTable = $('#editable').dataTable();

          /* Apply the jEditable handlers to the table */
          oTable.$('td').editable( '../example_ajax.php', {
              "callback": function( sValue, y ) {
                  var aPos = oTable.fnGetPosition( this );
                  oTable.fnUpdate( sValue, aPos[0], aPos[1] );
              },
              "submitdata": function ( value, settings ) {
                  return {
                      "row_id": this.parentNode.getAttribute('id'),
                      "column": oTable.fnGetPosition( this )[2]
                  };
              },

              "width": "90%",
              "height": "100%"
          } );


      });

      function fnClickAddRow() {
          $('#editable').dataTable().fnAddData( [
              "Custom row",
              "New row",
              "New row",
              "New row",
              "New row" ] );

      }

  </script>

<% end %>
